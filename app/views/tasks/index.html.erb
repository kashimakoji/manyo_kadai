<h1>タスク一覧</h1>
<%= button_to "タスク新規作成", new_task_path, method: :get %>

<%= form_with(url: tasks_path,  method: :get, local: true) do |form| %>
  <%= form.text_field :search %>
  <%# <% binding.irb %> %>
  <%= form.select :status, Task.localed_statuses, include_blank: "選択して下さい" %>
  <%= form.submit '検索' %>
<% end %>

<hr>
<table>
  <tr>
    <th>Task名称</th>
    <th>詳しい内容</th>
    <th><%= link_to '終了期限',tasks_path(sort_expired: "true"), class: "end_time" %></th>
    <!-- <th>作成日時</th> -->
    <th>ステータス</th>
  </tr>

  <% @tasks.each do |task| %>
  <tbody class="task_body">
    <tr>
      <td><%= link_to task.task_name, task_path(task.id) %></td>
      <td><%= task.content %></td>
        <td><%= l task.end_time, format: :mid %></td>
      <!-- <td><%= l task.created_at %></td> -->
      <td><%= task.status %></td>
      <td><%= button_to '編集', edit_task_path(task.id),method: :get %></td>
      <td><%= button_to '削除', task_path(task.id), method: :delete, data: { confirm: "「#{task.task_name}」を削除していいですか？"} %></td>
    </tr>
  </tbody>
  <% end %>

</table>
